<div class="register-container">
  <div class="register-card">
    <div class="register-header">
      <h2>Registrarse</h2>
      <p>Crear una nueva cuenta</p>
    </div>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
      <div class="form-row">
        <div class="form-group">
          <label for="username">Usuario</label>
          <input
            type="text"
            id="username"
            formControlName="username"
            class="form-control"
            [class.error]="getFieldError('username')"
            placeholder="Ingresa tu usuario"
          />
          <span class="error-message" *ngIf="getFieldError('username')">
            {{ getFieldError('username') }}
          </span>
        </div>

        <div class="form-group">
          <label for="email">Email</label>
          <input
            type="email"
            id="email"
            formControlName="email"
            class="form-control"
            [class.error]="getFieldError('email')"
            placeholder="tu@email.com"
          />
          <span class="error-message" *ngIf="getFieldError('email')">
            {{ getFieldError('email') }}
          </span>
        </div>
      </div>

      <div class="form-group">
        <label for="role">Rol</label>
        <select
          id="role"
          formControlName="role"
          class="form-control"
          [class.error]="getFieldError('role')"
        >
          <option value="">Selecciona un rol</option>
          <option *ngFor="let role of availableRoles" [value]="role.value">
            {{ role.description }}
          </option>
        </select>
        <span class="error-message" *ngIf="getFieldError('role')">
          {{ getFieldError('role') }}
        </span>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="password">ContraseÃ±a</label>
          <div class="password-field">
            <input
              [type]="showPassword ? 'text' : 'password'"
              id="password"
              formControlName="password"
              class="form-control"
              [class.error]="getFieldError('password')"
              placeholder="ContraseÃ±a"
            />
            <button
              type="button"
              class="password-toggle"
              (click)="togglePasswordVisibility()"
            >
              {{ showPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸' }}
            </button>
          </div>
          <span class="error-message" *ngIf="getFieldError('password')">
            {{ getFieldError('password') }}
          </span>
        </div>

        <div class="form-group">
          <label for="confirmPassword">Confirmar ContraseÃ±a</label>
          <div class="password-field">
            <input
              [type]="showConfirmPassword ? 'text' : 'password'"
              id="confirmPassword"
              formControlName="confirmPassword"
              class="form-control"
              [class.error]="getFieldError('confirmPassword')"
              placeholder="Confirmar contraseÃ±a"
            />
            <button
              type="button"
              class="password-toggle"
              (click)="toggleConfirmPasswordVisibility()"
            >
              {{ showConfirmPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸' }}
            </button>
          </div>
          <span class="error-message" *ngIf="getFieldError('confirmPassword')">
            {{ getFieldError('confirmPassword') }}
          </span>
        </div>
      </div>

      <button
        type="submit"
        class="register-button"
        [disabled]="isLoading || registerForm.invalid"
      >
        <span *ngIf="isLoading" class="spinner"></span>
        {{ isLoading ? 'Registrando...' : 'Registrarse' }}
      </button>

      <div class="register-footer">
        <p>Â¿Ya tienes cuenta? <a routerLink="/auth/login">Inicia sesiÃ³n aquÃ­</a></p>
      </div>
    </form>
  </div>
</div>